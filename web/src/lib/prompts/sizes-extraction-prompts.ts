/**
 * Sizes Extraction Prompts
 * Used for extracting sizes from WhatsApp messages with DB size patterns as context
 *
 * NOTE: Size patterns are hardcoded from database analysis (run analyze-db-sizes.ts to update)
 * These are COMPLETE size patterns (e.g., "36(1) 37(1) 38(2) 39(2) 40(1) 41(1)") that represent
 * full size variants with counts found in the database.
 */

// Hardcoded size patterns from database (analyzed on 2025-01-31)
// These are complete size patterns with counts, e.g., "36(1) 37(1) 38(2) 39(2) 40(1) 41(1)"

// Top 30 most popular size patterns (sorted by frequency, most popular first)
const TOP_30_POPULAR_PATTERNS = [
  '36(1) 37(1) 38(2) 39(2) 40(1) 41(1)', // frequency: 1803
  '36(1) 37(1) 38(2) 39(1) 40(1)', // frequency: 490
  '41(1) 42(1) 43(2) 44(2) 45(1) 46(1)', // frequency: 480
  '36(1) 37(1) 38(1) 39(1) 40(1) 41(1)', // frequency: 337
  '41(1) 42(2) 43(2) 44(2) 45(1)', // frequency: 191
  '36(1) 37(2) 38(1) 39(1) 40(1)', // frequency: 91
  '36(1) 37(2) 38(2) 39(2) 40(2) 41(1)', // frequency: 91
  '40(1) 41(1) 42(2) 43(2) 44(1) 45(1)', // frequency: 69
  '32(1) 33(1) 34(2) 35(2) 36(1) 37(1)', // frequency: 67
  '31(1) 32(1) 33(2) 34(2) 35(1) 36(1)', // frequency: 64
  '37(1) 38(2) 39(2) 40(2) 41(1)', // frequency: 63
  '36(1) 37(2) 38(2) 39(2) 40(1)', // frequency: 55
  '41(1) 42(1) 43(1) 44(2) 45(1)', // frequency: 38
  '27(1) 28(1) 29(2) 30(2) 31(1) 32(1)', // frequency: 31
  '37(2) 38(2) 39(2) 40(2) 41(2)', // frequency: 29
  '36(1) 37(2) 38(2) 39(2) 40(1) 41(1)', // frequency: 26
  '41(1) 42(1) 43(1) 44(1) 45(1)', // frequency: 24
  '35(1) 36(1) 37(2) 38(2) 39(1) 40(1)', // frequency: 22
  '37(2) 38(2) 39(4) 40(2) 41(2)', // frequency: 21
  '36(1) 37(1)', // frequency: 19
  '36(1) 37(1) 38(1) 39(1) 40(1)', // frequency: 18
  '36(1) 37(2) 38(2) 39(1) 40(1) 41(1)', // frequency: 18
  '41(1) 42(1) 43(2) 44(1) 45(1)', // frequency: 18
  '37(1) 38(1) 39(2) 40(2) 41(1) 42(1)', // frequency: 17
  '26(1) 27(1) 28(2) 29(2) 30(1) 31(1)', // frequency: 17
  '35(1) 36(1) 37(1) 38(1) 39(1) 40(1)', // frequency: 17
  '37(1) 38(2) 39(2) 40(1) 41(1)', // frequency: 16
  '41(1) 42(1) 43(1) 44(1) 45(1) 46(1)', // frequency: 16
  '41(2) 42(2) 43(4) 44(2) 45(2)', // frequency: 16
  '31(1) 32(2) 33(2) 34(2) 35(2) 36(1)', // frequency: 15
];

/**
 * Generate system prompt with hardcoded DB size patterns
 */
export const generateSizesExtractionSystemPrompt = (): string => {
  const top30List = TOP_30_POPULAR_PATTERNS.join(', ');

  return `–í—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—é —Ä–∞–∑–º–µ—Ä–æ–≤ –æ–±—É–≤–∏ –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤ WhatsApp —Å–æ–æ–±—â–µ–Ω–∏–π. –í–∞—à–∞ –∑–∞–¥–∞—á–∞ - —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ —Ä–∞–∑–º–µ—Ä—ã —É–∫–∞–∑–∞–Ω—ã –≤ —Ç–µ–∫—Å—Ç–µ.

–í–ê–ñ–ù–û: –¢–µ–∫—Å—Ç –∏–∑ WhatsApp –æ–±—ã—á–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö, –∏–Ω–æ–≥–¥–∞ —Å –æ—à–∏–±–∫–∞–º–∏, –Ω–µ –æ—á–µ–Ω—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ. –í–∞–º –Ω—É–∂–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —ç—Ç–æ.

üö® –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã —Ä–∞–∑–º–µ—Ä–æ–≤:
${top30List}

–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê (JSON):
{
  "sizes": [{"size": "36", "count": 1}, {"size": "37", "count": 1}, {"size": "38", "count": 2}, {"size": "39", "count": 2}, {"size": "40", "count": 1}, {"size": "41", "count": 1}],
  "packPairs": 8,
  "extractionNotes": "–î–µ—Ç–∞–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –æ —Ç–æ–º, –∫–∞–∫ –±—ã–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω—ã —Ä–∞–∑–º–µ—Ä—ã (3-5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π)"
}

–ü–†–ê–í–ò–õ–ê –ò–ó–í–õ–ï–ß–ï–ù–ò–Ø –†–ê–ó–ú–ï–†–û–í:

1. –§–û–†–ú–ê–¢–´ –†–ê–ó–ú–ï–†–û–í –í –¢–ï–ö–°–¢–ï:
   - "–†–∞–∑–º–µ—Ä: 36/37/38" –∏–ª–∏ "–†–∞–∑: 36-40" –∏–ª–∏ "–†–∞–∑–º–µ—Ä -36-41"
   - "36 37 38 39" (–ø—Ä–æ–±–µ–ª—ã)
   - "–†–∞–∑–º–µ—Ä—ã 35,36,37,38" (–∑–∞–ø—è—Ç—ã–µ)
   - "35/36/37/38/39/40" (—Å–ª—ç—à–∏)
   - "–†-36/37/38"
   - –° —ç–º–æ–¥–∑–∏: "üîù‚ùÑÔ∏è–†–∞–∑–º–µ—Ä:36/37/38"
   - –î–∏–∞–ø–∞–∑–æ–Ω—ã: "36-41", "-36-41", "36/41" - –≤—Å–µ –æ–∑–Ω–∞—á–∞—é—Ç –¥–∏–∞–ø–∞–∑–æ–Ω –æ—Ç 36 –¥–æ 41 –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ

2. –ü–ê–¢–¢–ï–†–ù–´ –° –ö–û–õ–ò–ß–ï–°–¢–í–û–ú:
   - "36/37/38/39/40/41" ‚Üí –ø–æ 1 –ø–∞—Ä–µ –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
   - "36:2/37:1/38:3" ‚Üí 2 –ø–∞—Ä—ã 36, 1 –ø–∞—Ä–∞ 37, 3 –ø–∞—Ä—ã 38
   - "36/37/38/39/40/41-6 –ø" ‚Üí 6 —Ä–∞–∑–º–µ—Ä–æ–≤, 6 –ø–∞—Ä, –∫–∞–∂–¥—ã–π —Ä–∞–∑–º–µ—Ä count=1
   - "–†–∞–∑:36/37/38:2/39:2/40/41" ‚Üí 36(1), 37(1), 38(2), 39(2), 40(1), 41(1) = 8 –ø–∞—Ä
   - "41/42/43:2/44:2/45/46-8 –ø–∞—Ä" ‚Üí 41(1), 42(1), 43(2), 44(2), 45(1), 46(1) = 8 –ø–∞—Ä
   - "–†–∞–∑–º–µ—Ä:37-41 üë£ –ü–æ–≤—Ç–æ—Ä—ã:38,39,40√ó2 üë£ –ö–æ—Ä–æ–±–∫–∞:8–ø–∞—Ä" ‚Üí 37(1), 38(2), 39(2), 40(2), 41(1) = 8 –ø–∞—Ä
   - "–†–∞–∑–º–µ—Ä:33,2/34,2/35,2 üë£ –ö–æ—Ä–æ–±–∫–∞:6–ø–∞—Ä" ‚Üí 33(2), 34(2), 35(2) = 6 –ø–∞—Ä (–¥–µ—Å—è—Ç–∏—á–Ω–∞—è —á–∞—Å—Ç—å –æ–∑–Ω–∞—á–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
   - "–†–∞–∑–º–µ—Ä 36/37/38.2/39/40/ üë£ –ö–æ—Ä–æ–±–∫–∞ 6 –ø–∞—Ä" ‚Üí 36(1), 37(1), 38(2), 39(1), 40(1) = 6 –ø–∞—Ä
   - "–†–∞–∑–º–µ—Ä/36/37/38.2/39,2/40/41" + "–ö–æ—Ä–æ–±–∫–∞ : 8 –ø–∞—Ä" ‚Üí 36(1), 37(1), 38(2), 39(2), 40(1), 41(1) = 8 –ø–∞—Ä
   - "–†–∞–∑–º–µ—Ä 27/31 üë£ –ü–æ–≤ 28/29/30 üë£ –ö–æ—Ä–æ–±–∫–∞:8–ø–∞—Ä" ‚Üí 27(1), 28(2), 29(2), 30(2), 31(1) = 8 –ø–∞—Ä
   - "–†–ê–ó–ú–ï–†:36,37,38,39,40" + "–ü–ê–í–¢–û–†: 37,38,39" ‚Üí 36(1), 37(2), 38(2), 39(2), 40(1) = 8 –ø–∞—Ä
   - "–†–∞–∑–º–µ—Ä : 36/41" + "–∫–æ—Ä–æ–±–∫–∞ Ôºö 8 –ø–∞—Ä" ‚Üí 36(1), 37(1), 38(2), 39(2), 40(1), 41(1) = 8 –ø–∞—Ä (—É–¥–≤–∞–∏–≤–∞—é—Ç—Å—è —Å—Ä–µ–¥–Ω–∏–µ —Ä–∞–∑–º–µ—Ä—ã)
   - "–†–∞–∑–º–µ—Ä -36-41. 38/39 –•2 –ö–æ—Ä–æ–±–∫–∞ = 8–ø–∞—Ä–∞" ‚Üí 36(1), 37(1), 38(2), 39(2), 40(1), 41(1) = 8 –ø–∞—Ä
   - "–†–∞–∑. 22/23/24/25/26/27" + "–í—Å–µ —Ü–≤–µ—Ç–∞ –ø–æ —à–µ—Å—Ç—å –ø–∞—Ä–∞" ‚Üí –∫–∞–∂–¥—ã–π —Ä–∞–∑–º–µ—Ä count=6

3. –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê:
   - üö® –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä —É–∫–∞–∑–∞–Ω –∫–∞–∫ "38.2" –∏–ª–∏ "38,2", —ç—Ç–æ —Ä–∞–∑–º–µ—Ä 38 —Å 2 –ø–∞—Ä–∞–º–∏, –ù–ï —Ä–∞–∑–º–µ—Ä 38.2
   - üö® –î–µ—Å—è—Ç–∏—á–Ω–∞—è –∑–∞–ø—è—Ç–∞—è (,) –∏ —Ç–æ—á–∫–∞ (.) –≤ —Ä–∞–∑–º–µ—Ä–∞—Ö –æ–∑–Ω–∞—á–∞—é—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä (38,2 = 38.2 = —Ä–∞–∑–º–µ—Ä 38 —Å 2 –ø–∞—Ä–∞–º–∏)
   - üö® –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä: X –ø–∞—Ä", —Å—É–º–º–∞ –≤—Å–µ—Ö count —Ä–∞–∑–º–µ—Ä–æ–≤ –î–û–õ–ñ–ù–ê –±—ã—Ç—å —Ä–∞–≤–Ω–∞ X
   - üö® "–ü–æ–≤" (–∏–ª–∏ "–ü–æ–≤—Ç–æ—Ä—ã", "–ü–ê–í–¢–û–†") –æ–∑–Ω–∞—á–∞–µ—Ç —Ä–∞–∑–º–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —É–¥–≤–æ–∏—Ç—å (count=2)

4. –ß–¢–û –ù–ï –Ø–í–õ–Ø–ï–¢–°–Ø –†–ê–ó–ú–ï–†–ê–ú–ò:
   - –ê–¥—Ä–µ—Å–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "3/4/17" - —ç—Ç–æ –º–µ—Å—Ç–æ –Ω–∞ —Ä—ã–Ω–∫–µ, –ù–ï —Ä–∞–∑–º–µ—Ä—ã)
   - –ù–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
   - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
   - –¶–µ–Ω—ã

5. –†–ê–°–ß–ï–¢ –ü–ê–† –í –£–ü–ê–ö–û–í–ö–ï:
   - –í–°–ï–ì–î–ê —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–π—Ç–µ packPairs –∏–∑ —Ä–∞–∑–º–µ—Ä–æ–≤ (—Å—É–º–º–∞ –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π count)
   - –ò—â–∏—Ç–µ —Ñ—Ä–∞–∑—ã —Ç–∏–ø–∞ "–ö–æ—Ä–æ–±–∫–∞: X –ø–∞—Ä", "–∫–æ—Ä–æ–±–∫–∞ X –ø–∞—Ä", "X –ø–∞—Ä", "X –ø–∞—Ä–∞"
   - –ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä —è–≤–Ω–æ —É–ø–æ–º—è–Ω—É—Ç–æ –≤ —Ç–µ–∫—Å—Ç–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≠–¢–û –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∫ –ò–°–¢–ò–ù–£
   - –°—É–º–º–∞ –≤—Å–µ—Ö count —Ä–∞–∑–º–µ—Ä–æ–≤ –î–û–õ–ñ–ù–ê —Ä–∞–≤–Ω—è—Ç—å—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–∞—Ä
`;
};

/**
 * Generate user prompt for sizes extraction
 */
export const generateSizesExtractionUserPrompt = (
  textContents: string
): string => {
  return `–¢–µ–∫—Å—Ç –∏–∑ WhatsApp —Å–æ–æ–±—â–µ–Ω–∏—è:

${textContents}

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç –∏ –∏–∑–≤–ª–µ–∫–∏—Ç–µ —Ä–∞–∑–º–µ—Ä—ã, —Å–æ–ø–æ—Å—Ç–∞–≤–∏–≤ –∏—Ö —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:
- –í–°–ï–ì–î–ê –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –í–ê–õ–ò–î–ù–´–ô JSON
- –í–°–ï–ì–î–ê —ç–∫—Ä–∞–Ω–∏—Ä—É–π—Ç–µ –∫–∞–≤—ã—á–∫–∏ –≤ —Å—Ç—Ä–æ–∫–∞—Ö: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ \\" –≤–º–µ—Å—Ç–æ "
- –í–°–ï–ì–î–ê —ç–∫—Ä–∞–Ω–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ \\n –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–Ω–æ—Å–æ–≤
- –ü–æ–ª–µ extractionNotes –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å 3-5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –æ —Ç–æ–º, –∫–∞–∫ –±—ã–ª–∏ –Ω–∞–π–¥–µ–Ω—ã —Ä–∞–∑–º–µ—Ä—ã`;
};
